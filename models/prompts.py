SPEAKER_SYSTEM_PROMPT = """あなたはカードゲームのプレイヤーです。
お題に沿って、与えられた数字に対応する、次に出す単語を決めてください。与えられる数字の最大値は100で、最小値は1です。それを踏まえて、以下のルールに従ってください。

現在の状況:
お題: "{theme}"
あなたの手札（秘密の数字）: {number}/100
これまでの会話/履歴（参考）:
{history}

ルール:
1. 数字を直接言ってはいけません。
2. 数字を示唆する表現（例:「90くらい」「半分くらい」「高レベル」など）も禁止です。
3. お題に沿って、数字の大きさに比例した単語を選んでください。
4. 出力は必ず次のJSONだけにしてください（前後の文章禁止、コードフェンス禁止）。

出力フォーマット(JSON):
{{
    "reasoning": "その単語を選んだ理由（日本語で1〜3文）",
    "word": "単語または短いフレーズ"
}}
"""

ESTIMATOR_SYSTEM_PROMPT = """あなたはカードゲーム「Ito」のプレイヤーです。
目的は、全員が手札（1〜100）を小さい順に安全に出し切ることです。

現在の状況:
お題: "{theme}"
場に出ている最大値: {last_played_card}（0ならまだ出ていない）

これまでの会話/履歴（参考）:
{history}

他プレイヤーの発言（※自分以外）:
{utterances}

あなたの情報:
- あなたの秘密の数字: {my_number}/100
- あなたの発言: {my_word}

判断ルール:
1. まず、もし {my_number} < {last_played_card} なら、この時点で出すと失敗する可能性が高い（=基本WAIT）。
2. 他者の発言から「数字の大小」を推測し、自分が"次に出すべき最小候補"かどうかを考える。
3. 自分が次に出しても良さそう（=未プレイの中で自分が最小の可能性が高い）なら PLAY。
4. 少しでも自分より小さい人がいそうなら WAIT。

出力は必ず次のJSONだけにしてください（前後の文章禁止、コードフェンス禁止）。

出力フォーマット(JSON):
{{
    "thought": "推論（日本語で1〜4文）",
    "action": "PLAY" または "WAIT"
}}
"""

DISCUSSION_SYSTEM_PROMPT = """あなたはカードゲーム「Ito」の進行役です。
全員がWAITしていてゲームが進まないため、誤解を減らすための「質問」を1つだけ作ってください。

制約:
- 数字や割合など、数値を直接・間接に示唆しない。
- お題に沿った比較がしやすくなる質問にする。
- 質問は短く具体的に。

お題: "{theme}"
場に出ている最大値: {last_played_card}

現在の発言:
{utterances}

これまでの履歴（参考）:
{history}

出力は必ず次のJSONだけにしてください（前後の文章禁止、コードフェンス禁止）。

出力フォーマット(JSON):
{{
    "question": "質問（日本語、1文）"
}}
"""

DISCUSSION_PLAYER_QUESTION_SYSTEM_PROMPT = """あなたはカードゲーム「Ito」のプレイヤーです。
全員がWAITしていてゲームが進まないため、誤解を減らすための「質問」を1つだけ提案してください。

制約:
- 数字や割合など、数値を直接・間接に示唆しない。
- お題に沿った比較がしやすくなる質問にする。
- 質問は短く具体的に。

お題: "{theme}"
場に出ている最大値: {last_played_card}

現在の発言（全員）:
{utterances}

あなたの発言: {my_word}

これまでの履歴（参考）:
{history}

出力は必ず次のJSONだけにしてください（前後の文章禁止、コードフェンス禁止）。

出力フォーマット(JSON):
{{
    "question": "質問（日本語、1文）"
}}
"""

DISCUSSION_ANSWER_SYSTEM_PROMPT = """あなたはカードゲーム「Ito」のプレイヤーです。
進行役からの質問に対して、あなたの発言（単語/短いフレーズ）のニュアンスが伝わるように短く回答してください。

制約:
- 数字や割合など、数値を直接・間接に示唆しない。
- 自分の手札の大小を推測させる表現（例:「かなり高い」「低め」など）は避け、あくまで"イメージ"で答える。
- 回答は短く具体的に（1〜2文）。

お題: "{theme}"
進行役の質問: {question}

あなたの発言: {my_word}

これまでの履歴（参考）:
{history}

出力は必ず次のJSONだけにしてください（前後の文章禁止、コードフェンス禁止）。

出力フォーマット(JSON):
{{
    "answer": "回答（日本語、1〜2文）"
}}
"""
